/* ==========================================================================
   Home: Cards page layout
   - Viewport: fixed window under navbar
   - Gutter: outer padding box (controls top/bottom and L/R space)
   - Grid: strict 2-row layout; columns switch via JS classes (3/2/1)
   ========================================================================== */

/* Fixed-height viewport under the navbar */
.cards-viewport {
    height: calc(100vh - 89px);
    background: #ECF0F1;
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;
    padding-left: 5.869%;
    padding-right: 5.869%;
}

/* Outer gutter (controls vertical rhythm and inner padding) */
.cards-gutter {
    height: 80vh;
    width: 100%;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
}

/* Grid host (strict modes applied via .mode-* classes) */
.cards-grid {
    display: grid;
    height: 100%;
    width: 100%;
    gap: 24px;

    /* Center grid within the gutter in both axes */
    justify-content: center;
    align-content: center;
    justify-items: stretch;
    align-items: stretch;

    /* Enables @container queries inside cards if desired */
    container-type: inline-size;
}

/* Strict modes (never auto-fit columns) */
.cards-grid.mode-3x2 {
    grid-template-columns: repeat(3, 1fr);
    grid-template-rows: repeat(2, 1fr);
}

.cards-grid.mode-2x2 {
    grid-template-columns: repeat(2, 1fr);
    grid-template-rows: repeat(2, 1fr);
}

.cards-grid.mode-2x1 {
    grid-template-columns: repeat(1, 1fr);
    grid-template-rows: repeat(2, 1fr);
}

/* Ensure ONLY cards are grid items; block any stray elements from affecting layout */
.cards-grid> :not(.card-link) {
    display: none !important;
}

/* Make each grid child occupy its cell fully */
.cards-grid>.card-link {
    display: block;
    height: 100%;
}

/* Post-hydration visibility toggle (avoid inline styles) */
.card-link.is-hidden {
    display: none !important;
}

/* Stretch the card content so rows never collapse into slivers */
.cards-grid>.card-link>.card {
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    height: 100%;
    min-height: 260px;
    /* prevents “line” collapse */
    position: relative;
    /* for the status dot */
}

/* Status dot positioning (so it doesn’t wander when card is short) */
.card .status-dot {
    position: absolute;
    top: 10px;
    right: 10px;
}

/* Pager (centered, compact) */
.cards-pager {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    margin-top: 16px;

    /* Reserve space so appearing/disappearing pager doesn't alter page height/scrollbar */
    min-height: 41px;
    /* matches .pager-btn height */
}

/* Match dashboard settings button style */
.pager-btn {
    height: 41px;
    /* same height as .aimsds-btn */
    padding: 0 16px;
    background: #ecf0f1;
    /* light gray */
    color: #34495e;
    /* dark slate text */
    border: 3px solid #34495e;
    /* thick border */
    box-shadow: 0 4px 4px #0000003e;
    border-radius: 20px;
    /* pill */
    cursor: pointer;
    font-weight: 600;
    /* emphasis */
    transition: border-color .15s ease-out, box-shadow .15s ease-out, transform .15s ease-out;
}

.pager-btn:hover {
    border-color: #1abc9c;
}

.pager-btn:focus-visible {
    outline: 3px solid #1abc9c;
    outline-offset: 3px;
}

.pager-btn:active {
    transform: translateY(1px);
    box-shadow: 0 2px 3px #0000003e;
}

.pager-btn[disabled] {
    opacity: 0.5;
    cursor: default;
    box-shadow: none;
}

/* Dots—subtle, to fit the palette */
.pager-dots {
    display: flex;
    gap: 8px;
}

.pager-dot {
    appearance: none;
    margin: 0;
    padding: 0;
    border: none;
    background: transparent;

    line-height: 0;
    font-size: 0;
    text-indent: -9999px;

    display: inline-block;
    width: 14px;
    height: 14px;
    border-radius: 999px;

    border: 2px solid #34495e;
    background: #ecf0f1;
    box-shadow: 0 2px 2px #0000002a;
    cursor: pointer;
}

.pager-dot.active {
    background: #1abc9c;
}

/* Settings button */
.settings-btn {
    position: fixed;
    top: clamp(100px, 2vw, 0px);
    right: clamp(12px, 2vw, 0px);
    width: clamp(36px, 4vw, 52px);
    height: clamp(36px, 4vw, 52px);
    border-radius: 50%;
    border: 3px solid #1e2b3b;
    background-color: var(--primary, #1e2b3b);
    background-image: url('/images/settings-icon.png');
    background-size: 75%;
    background-repeat: no-repeat;
    background-position: center;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    cursor: pointer;
    transition: transform 0.2s ease, background-color 0.2s ease;
    z-index: 1050;
}

.settings-btn:hover {
    border-color: #2ecc71;
    box-shadow: 0 0 10px rgba(46, 204, 113, .45);
    transform: translateY(-1px);
}

.settings-btn:focus-visible {
    outline: 3px solid #2ecc71;
    outline-offset: 3px;
}

/* Before first slice, keep the grid invisible but measurable */
.cards-grid.hydrating {
    visibility: hidden;
    /* not display:none; JS needs clientWidth */
}

/* After first slice */
.cards-grid:not(.hydrating) {
    visibility: visible;
}

/* Keep pager from blinking while grid is hidden */
.cards-grid.hydrating+.cards-pager {
    visibility: hidden;
}

.cards-grid:not(.hydrating)+.cards-pager {
    visibility: visible;
}

/* Guard against accidental fades on icons and numbers */
.card-icon,
.js-total,
.js-available,
.js-percent,
.status-dot {
    transition: none !important;
}

/* Asset icon base sizing (+ intrinsic ratio for stability) */
.card-icon {
    width: clamp(48px, 40%, 300px);
    height: auto;
    object-fit: contain;
    margin: 0;
    aspect-ratio: 1 / 1;
}